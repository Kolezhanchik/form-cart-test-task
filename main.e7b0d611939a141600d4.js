!function(){var e,t={6971:function(e,t){t.h=["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia &amp; Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cruise Ship","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Namibia","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre &amp; Miquelon","Samoa","San Marino","Satellite","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","St Kitts &amp; Nevis","St Lucia","St Vincent","St. Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos","Uganda","Ukraine","United Arab Emirates","United Kingdom","Uruguay","Uzbekistan","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"]},6926:function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,a,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._parent=document.querySelector(r),this._container=document.querySelector(a)}var t,a,n;return t=e,(a=[{key:"cartResult",value:function(e){var t=e.cart.reduce((function(e,t){return e+t.price}),0),a=e.taxes,r=e.shipping,n=a+r+t;this._parent.querySelector(".cart__subtotal").textContent="".concat(e.cart[0].currency," ").concat(t),this._parent.querySelector(".cart__shipping").textContent=r>0?"".concat(e.cart[0].currency," ").concat(r):"Free",this._parent.querySelector(".cart__taxes").textContent="".concat(e.cart[0].currency," ").concat(a),this._parent.querySelector(".cart__total").textContent="".concat(e.cart[0].currency," ").concat(n)}},{key:"rendererItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&r(t.prototype,a),n&&r(t,n),e}();function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cartSelector=a,this._id=t.itemId,this._image=t.image,this._about=t.about,this._quantity=t.quantity,this._name=t.itemName,this._price=t.price,this._currency=t.currency}var t,a,r;return t=e,(a=[{key:"_getTemplate",value:function(){return document.querySelector(this._cartSelector).content.querySelector(".cart-item").cloneNode(!0)}},{key:"generateCartItem",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".cart-item__image").src=this._image,this._element.querySelector(".cart-item__name").textContent=this._name,this._element.querySelector(".cart-item__description").textContent=this._about,this._element.querySelector(".cart-item__quantity").textContent=this._quantity,this._element.querySelector(".cart-item__price").textContent=this._price,this._element.querySelector(".cart-item__currency").textContent=this._currency,this._element.setAttribute("id","_".concat(this._id)),this._element}}])&&i(t.prototype,a),r&&i(t,r),e}(),c=a.p+"1a307a0bcb6d09220f4dc8889fc88b37.svg",s=JSON.parse('{"id":1,"name":"","last-name":"","taxes":12.12,"shipping":0,"cart":[{"itemId":1,"itemName":"The Chelsea Boot","price":235,"about":"Black","image":"https://github.com/KoLenhen/form-cart-test-task/blob/master/src/assets/images/item1.png?raw=true","quantity":"1","currency":"$"},{"itemId":2,"itemName":"The Twill Snap Backpack","price":65,"about":"Reverse Denim + Brown leather","image":"https://github.com/KoLenhen/form-cart-test-task/blob/master/src/assets/images/item2.png?raw=true","quantity":"1","currency":"$"},{"itemId":3,"itemName":"The Twill Zip Tote","price":48,"about":"Reverse Denim + Black leather","image":"https://github.com/KoLenhen/form-cart-test-task/blob/master/src/assets/images/item3.png?raw=true","quantity":"1","currency":"$"}]}');function u(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude;return function(e,t){return fetch("https://geocode-maps.yandex.ru/1.x/?format=json&apikey=15e586b6-9e0e-4163-b84e-6eaec1f97d60&geocode=".concat(e,",").concat(t))}(e.coords.longitude,t).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){document.querySelectorAll("input[name='City']").forEach((function(t){t.value=e.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.text}))})).catch((function(e){alert(e)})),console.log(""),""}),(function(){console.log("Unable to retrieve your location")})):console.log("Geolocation is not supported by your browser")}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._formElement=document.querySelector(a)}var t,a,r;return t=e,(a=[{key:"enableValidation",value:function(){console.log(this._formElement),this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._data.inputSelector)),a=document.querySelector(this._data.submitButtonSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._isValid(r),e._toggleButtonState(t,a)}))}))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_toggleButtonState",value:function(e,t){console.log(this._hasInvalidInput(e)),this._hasInvalidInput(e)?(t.classList.add(this._data.inactiveButtonClass),t.setAttribute("disabled","")):(t.classList.remove(this._data.inactiveButtonClass),t.removeAttribute("disabled",""))}},{key:"_showInputError",value:function(e,t){var a=this._formElement.querySelector("#".concat(e.id,"-mistake"));e.classList.add(this._data.inputErrorClass),a.textContent=t,a.classList.add(this._data.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-mistake"));e.classList.remove(this._data.inputErrorClass),t.classList.remove(this._data.errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}}])&&l(t.prototype,a),r&&l(t,r),e}(),d={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__btn",inactiveButtonClass:"form__btn_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},_=a(6971).h,f=0;function h(e){var t=e.target.closest(".form__wrap_select");t.querySelector(".form__input_select").value=e.target.textContent,t.querySelector(".form__list").classList.toggle("form__list_active"),t.classList.toggle("form__wrap_select-active")}function p(e){var t=e.target.closest(".form__wrap_select");t.querySelector(".form__list").classList.toggle("form__list_active"),t.querySelector(".form__input_select").placeholder="",t.classList.toggle("form__wrap_select-active")}g(f),document.querySelectorAll(".form__geobtn").forEach((function(e){e.addEventListener("click",u)})),document.querySelector(".header__cart-quantity").textContent=s.cart.length,document.querySelector(".header__logo").src=c,document.querySelectorAll(".form__input_select").forEach((function(e){return e.addEventListener("click",p)})),document.querySelectorAll(".form__list").forEach((function(e){var t;t=e,_.forEach((function(e){var a=document.createElement("li");a.classList.add("form__list-item"),a.textContent=e,t.appendChild(a)})),e.addEventListener("click",h)}));var y=new n({renderer:function(e){var t=function(e){return new o(e,"#cart-item-template")}(e).generateCartItem();y.addItem(t)}},".cart__items",".cart");function g(e){var t=document.querySelectorAll(".form__step");t[e].style.display="block",document.querySelector(".form__btn").setAttribute("disabled",""),e===t.length-1?document.querySelector(".form__btn").textContent="Pay Securely":document.querySelector(".form__btn").textContent="Continue",function(e){for(var t=document.querySelectorAll(".form__crumb"),a=0;a<t.length;a++)t[a].classList.remove("form__crumb_active"),a<e&&t[a].classList.add("form__crumb_passed");t[e].classList.add("form__crumb_active")}(e);var a=".".concat(t[e].classList[0],"-").concat(e);new m(d,a).enableValidation()}y.rendererItems(s.cart),y.cartResult(s),document.querySelector(".form__btn").addEventListener("click",(function(){!function(e){var t=document.querySelectorAll(".form__step");if(e>2)return!1;if(t[f].style.display="none",(f+=e)>=t.length)return document.querySelector(".form").submit(),!1;g(f)}(1)}))}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=function(t,a,n,i){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],i=e[u][2];for(var c=!0,s=0;s<a.length;s++)(!1&i||o>=i)&&Object.keys(r.O).every((function(e){return r.O[e](a[s])}))?a.splice(s--,1):(c=!1,i<o&&(o=i));c&&(e.splice(u--,1),t=n())}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,n,i]},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e}(),function(){var e={179:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,o=a[0],c=a[1],s=a[2],u=0;for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(s)var l=s(r);for(t&&t(a);u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&e[i][0](),e[o[u]]=0;return r.O(l)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}(),r.O(void 0,[202],(function(){return r(1202)}));var n=r.O(void 0,[202],(function(){return r(6926)}));n=r.O(n)}();